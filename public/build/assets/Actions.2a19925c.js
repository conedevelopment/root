import{_ as b,r as d,o as r,c as l,f as A,j as h,d as s,t as m,n as k,F as f,a as _,b as p,m as w,w as y,g as B,k as M}from"./app.c4db69fd.js";const S={props:{action:{type:Object,required:!0},selection:{type:Array,required:!0},allMatching:{type:Boolean,required:!0}},emits:["success","error"],data(){return{form:this.$inertia.form(this.action.key,Object.assign({},this.action.data))}},methods:{open(){this.$refs.modal.open()},submit(){this.form.transform(o=>({...o,all:this.allMatching,models:this.selection})).post(this.action.url+window.location.search,{onBefore:()=>{if(this.action.confirmable)return window.confirm(this.__("Are you sure?"))},onSuccess:()=>{this.$emit("success"),this.$refs.modal.close()},onError:o=>{this.$emit("error")}},{errorBag:this.action.key})}}};function V(o,i,n,g,a,c){const u=d("FormHandler"),e=d("Modal");return r(),l("form",{onSubmit:i[0]||(i[0]=y((...t)=>c.submit&&c.submit(...t),["prevent"]))},[A(e,{ref:"modal",title:n.action.name},{footer:h(()=>[s("button",{type:"submit",class:k(["btn",{"btn--delete":n.action.destructive,"btn--primary":!n.action.destructive}])},m(o.__("Run")),3)]),default:h(()=>[(r(!0),l(f,null,_(n.action.fields,t=>(r(),p(u,w(t,{modelValue:a.form[t.name],"onUpdate:modelValue":v=>a.form[t.name]=v,form:a.form,key:t.name,name:t.name}),null,16,["modelValue","onUpdate:modelValue","form","name"]))),128))]),_:1},8,["title"])],32)}const E=b(S,[["render",V]]),F={components:{Action:E},props:{actions:{type:Array,default:()=>[]},selection:{type:Array,default:()=>[]},allMatching:{type:Boolean,default:!1}},emits:["success","error"],data(){return{_action:null}},methods:{submit(){this.$refs.action[this._action].open()}}},j={class:"form-group form-group--inline"},q={class:"form-label",for:"actions-select"},C={value:null},U=["value"],D=["disabled"];function H(o,i,n,g,a,c){const u=d("Action");return r(),l("div",null,[s("form",{onSubmit:i[1]||(i[1]=y((...e)=>c.submit&&c.submit(...e),["prevent"])),class:"form--inline"},[s("div",j,[s("label",q,m(o.__("Action")),1),B(s("select",{id:"actions-select",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=e=>a._action=e)},[s("option",C,m(o.__("Select :label",{label:o.__("Action")})),1),(r(!0),l(f,null,_(n.actions,(e,t)=>(r(),l("option",{value:t,key:t},m(e.name),9,U))),128))],512),[[M,a._action]])]),s("button",{type:"submit",class:"btn btn--primary",disabled:a._action===null||n.selection.length===0},m(o.__("Run")),9,D)],32),s("div",null,[(r(!0),l(f,null,_(n.actions,e=>(r(),p(u,{ref_for:!0,ref:"action",action:e,"all-matching":n.allMatching,key:e.key,selection:n.selection,onError:t=>o.$emit("error",e),onSuccess:t=>o.$emit("success",e)},null,8,["action","all-matching","selection","onError","onSuccess"]))),128))])])}const O=b(F,[["render",H]]);export{O as A};
